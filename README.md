# Wildberries Tariffs API Project

–ü—Ä–æ–µ–∫—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–±–æ—Ä–∞ —Ç–∞—Ä–∏—Ñ–æ–≤ Wildberries –∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ –∏—Ö –≤ Google –¢–∞–±–ª–∏—Ü—ã.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
2. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Sheets API](#-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-google-sheets-api)
3. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞](#-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–ø—Ä–æ–µ–∫—Ç–∞)
4. [–ó–∞–ø—É—Å–∫ –≤ Docker](#-–∑–∞–ø—É—Å–∫-–≤-docker)
5. [–†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫](#-—Ä—É—á–Ω–æ–π-–∑–∞–ø—É—Å–∫)
6. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
7. [–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á](#-—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ-–∑–∞–¥–∞—á)

## üåü –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 18+
- Docker –∏ Docker Compose
- PostgreSQL 13+
- –ê–∫–∫–∞—É–Ω—Ç Google —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ Google Sheets API

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Sheets API

1. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç** –≤ [Google Cloud Console](https://console.cloud.google.com/)
2. **–í–∫–ª—é—á–∏—Ç–µ Google Sheets API**:
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "APIs & Services" ‚Üí "Library"
   - –ù–∞–π–¥–∏—Ç–µ "Google Sheets API" –∏ –≤–∫–ª—é—á–∏—Ç–µ –µ–≥–æ
3. **–°–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç**:
   - "APIs & Services" ‚Üí "Credentials" ‚Üí "Create Credentials" ‚Üí "Service account"
   - –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ
4. **–°–∫–∞—á–∞–π—Ç–µ JSON-–∫–ª—é—á**:
   - –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "Keys"
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á —Ç–∏–ø–∞ JSON –∏ —Å–∫–∞—á–∞–π—Ç–µ –µ–≥–æ
5. **–°–æ–∑–¥–∞–π—Ç–µ Google –¢–∞–±–ª–∏—Ü—É**:
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é —Ç–∞–±–ª–∏—Ü—É –≤ Google Sheets
   - –î–∞–π—Ç–µ –¥–æ—Å—Ç—É–ø —Å–µ—Ä–≤–∏—Å–Ω–æ–º—É –∞–∫–∫–∞—É–Ω—Ç—É (email –∏–∑ JSON-–∫–ª—é—á–∞) —Å –ø—Ä–∞–≤–∞–º–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
   - –î–æ–±–∞–≤—å—Ç–µ –≤ .env id —Ç–∞–±–ª–∏—Ü—ã (–ø—Ä–∏–º–µ—Ä –∏–∑ url —Ç–∞–±–ª–∏—Ü—ã: 
        https://docs.google.com/spreadsheets/d/1epwm2PW6IUF77Pq78cM0MHDncC_zw-aNRU2aIYyeVcE/edit?gid=1481016110#gid=1481016110
        –ù—É–∂–Ω–æ –≤–∑—è—Ç—å id –º–µ–∂–¥—É d –∏ edit => 1epwm2PW6IUF77Pq78cM0MHDncC_zw-aNRU2aIYyeVcE
   )

## üõ† –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª credentials.json –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞:
   ```bash
   cp credentials.json
   ```
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ `.env`:
   ```
   API_KEY=–≤–∞—à_–∫–ª—é—á_wildberries
   SPREADSHEET_ID=ID_–≤–∞—à–µ–π_—Ç–∞–±–ª–∏—Ü—ã
   ```

## üê≥ –ó–∞–ø—É—Å–∫ –≤ Docker

1. –°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:
   ```bash
   docker-compose up --build
   ```
2. –ü—Ä–æ–µ–∫—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - –ü–æ–¥–Ω–∏–º–µ—Ç PostgreSQL
   - –°–æ–∑–¥–∞—Å—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î
   - –ù–∞—á–Ω–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
   - –ë—É–¥–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ Google –¢–∞–±–ª–∏—Ü—É

## üíª –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   npm install
   ```
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏:
   ```bash
   npm run migrate
   ```
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
   ```bash
   npm start
   ```

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ migrations/    # –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db.js          # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ knexfile.js    # –ö–æ–Ω—Ñ–∏–≥ Knex.js
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ crontab.js     # –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ google.js      # –†–∞–±–æ—Ç–∞ —Å Google Sheets
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ parse_wb.js    # –ü–∞—Ä—Å–∏–Ω–≥ Wildberries API
‚îÇ   ‚îî‚îÄ‚îÄ index.js           # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ .env                   # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ credentials.json       # –ö–ª—é—á–∏ Google API
‚îú‚îÄ‚îÄ docker-compose.yml     # –ö–æ–Ω—Ñ–∏–≥ Docker
‚îî‚îÄ‚îÄ Dockerfile             # –ö–æ–Ω—Ñ–∏–≥ –æ–±—Ä–∞–∑–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

## ‚è∞ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏:
- **–ö–∞–∂–¥—ã–π —á–∞—Å –≤ 0 –º–∏–Ω—É—Ç**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–æ–≤ —Å Wildberries API
- **–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ Google –¢–∞–±–ª–∏—Ü—É
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞** –¥–∞–Ω–Ω—ã—Ö –ø–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—É –¥–æ—Å—Ç–∞–≤–∫–∏
